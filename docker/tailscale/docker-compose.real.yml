---
services:
  tailscale-docker:
    image: ghcr.io/tailscale/tailscale@sha256:9a1f2640beecac3ad42ed8ef03d75adcb7165600f5131b17f9a2a3da68505928
    pull_policy: ${pull_policy}
    container_name: tailscale
    hostname: tailscale
    environment:    
      - TZ=${timezone}
    volumes:
      - data:/var/lib
    devices:
      - /dev/net/tun:/dev/net/tun # Required for tailscale to work
    cap_add: # Required for tailscale to work
      - net_admin
      - sys_module
    command: tailscaled
    privileged: true
    restart: ${restart}
volumes:
  data: