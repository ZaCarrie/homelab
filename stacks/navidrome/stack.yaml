---
#networks:

volumes:
  navidrome_data:
    driver: local
    driver_opts:
      type: nfs
      o: ${NFS_O}
      device: ":${NFS_DEVICE}/${navidrome_container_name}/data"
  navidrome_music:
    driver: local
    driver_opts:
      type: nfs
      o: ${NFS_O}
      device: ":${NFS_DEVICE}/${navidrome_container_name}/music"

#secrets:

services:
  navidrome:
    image: deluan/navidrome:latest@sha256:2ae037d464de9f802d047165a13b1c9dc2bdbb14920a317ae4aef1233adc0a3c
    pull_policy: ${pull_policy}
    container_name: ${navidrome_container_name}
    restart: ${restart}
    ports:
      - "${navidrome_port_4533}:4533"
    #environment:    
    volumes:
      - navidrome_data:/data
      - /lib/modules:/music:ro

